# 课程订阅中心快速说明

## 主要做什么
- 在学生分析页面的“订阅中心”卡片区，展示学生当前设置的所有课程订阅。
- 如果某位学生还没有订阅，就显示一条提示，告诉你需要先去课程表里创建条件。

## 数据从哪里来
- `data/students.js` 为每位学生预置了 3 条示例订阅，包含课程代码、学校、状态、截止日期等字段。
- `scripts/studentRepository.js` 里的 `getSubscriptions(studentId)` 会把对应学生的订阅列表深拷贝后返回给前端，保证界面只读、不会误改原始数据。

## 页面怎么生成
- `index.html` 中的 `renderSubscriptionSection()` 会在你切换学生或打开订阅中心时运行：
  - 先清空 `#subscriptionCardsContainer`；
  - 找出当前学生，再拿到订阅数据；
  - 没有订阅就添加空状态提示；
  - 有订阅就为每条数据生成一张 `.subscription-card`。

## 卡片长什么样
- 标题区：课程代码、课程名称、学校信息，右侧有“产品课程 / 本校课程”徽章。
- 状态区：状态标签（带图标）+ 截止时间，必要时显示“⚠️ 剩余天数”提醒。
- 摘要区：显示概览信息，并提供“查看详情”按钮，展开后可看到学期、授课形式、时长、价格、创建日期等。
- 操作区：
  - 已转化：显示“订阅已完成”提示；
  - 其他状态：提供“跳转选课”“查看匹配课程”等按钮，`waiting` 状态还会露出“编辑条件”“续期”“取消订阅”。
- 注意：所有按钮目前只是 `alert` 占位，后续要接入真正的订阅流程。

## 如何筛选和排序
- 顶部下拉框：
  - `status-filter` 按订阅状态过滤；
  - `subscription-type-filter` 区分产品课程 / 本校课程；
  - `deadline-sort` 支持按截止日期升序或降序排列。
- `filterCards()` 会按照选择隐藏或显示卡片，并在筛选结束后再次触发排序。
- `sortCardsByDeadline()` 会读取卡片上的 `data-deadline`，把 DOM 节点重新排好顺序；`resetCardOrder()` 用 `data-index` 恢复原排序。

## 相关的订阅按钮模块
- 同一份 `index.html` 里还封装了 `SubscriptionModule`：
  - 帮我们生成单个订阅按钮或批量订阅按钮；
  - 统一处理点击后的模态框逻辑；
  - 自主选课列表已经在“课程代码”列重用这个模块，按钮只出现一次且带上 `data-*` 属性。

## 现在的局限
- 所有订阅数据都是静态示例，没有实时读写；
- 操作按钮只弹出提示框，没有真正修改数据；
- 没有分页或加载更多，默认一次渲染全部订阅。

## 后续接入建议
1. 在 `StudentRepository` 中新增写操作接口，把真实订阅结果回写数据源或后端接口；
2. 改造 `handleAction()`，弹出现有的订阅模态或发送 API 请求；
3. 更新 `createSubscriptions()`（或后端响应）提供准确的状态、截止日期、提醒信息；
4. 如果未来订阅数量很多，可以考虑增加分页、搜索或懒加载。
